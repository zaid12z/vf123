<%- include('../../layout/header') %>

<main class="max-w-md mx-auto px-4 py-12">
  <div class="verification-container bg-white rounded-lg shadow-lg p-8">
    <div class="text-center mb-8">
      <div class="mx-auto w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-4">
        <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
      </div>
      <h1 class="text-3xl font-bold text-gray-900">Verify Your <%= type === 'login' ? 'Login' : 'Email' %></h1>
      <p class="mt-2 text-sm text-gray-600">
        We've sent a verification code to<br>
        <span class="font-medium text-gray-900"><%= email %></span>
      </p>
    </div>
    
    <form id="verifyForm" class="space-y-6">
      <input type="hidden" name="email" value="<%= email %>">
      <input type="hidden" name="type" value="<%= type %>">
      
      <div class="code-input-group">
        <% for(let i = 0; i < 6; i++) { %>
          <input type="text" 
                 maxlength="1"
                 class="code-input"
                 data-code-input
                 style="animation-delay: <%= i * 0.1 %>s"
                 required>
        <% } %>
      </div>
      
      <button type="submit" 
              class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">
        Verify <%= type === 'login' ? 'Login' : 'Email' %>
      </button>
    </form>

    <div class="mt-6 text-center">
      <div id="resendTimer" class="resend-timer hidden">
        Resend code in <span class="timer-count">60</span>s
      </div>
      <button id="resendButton" 
              onclick="window.verificationUI.resendCode()" 
              class="text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors">
        Resend verification code
      </button>
    </div>
  </div>
</main>

<script type="module">
import { initVerificationUI, resendCode } from '/js/auth/verification.js';

// Expose resendCode function globally
window.verificationUI = { resendCode };

// Initialize verification UI
document.addEventListener('DOMContentLoaded', initVerificationUI);
</script>

<%- include('../../layout/footer') %>